<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>H2</title>

    <script type="module" src="https://unpkg.com/@google/model-viewer@latest/dist/model-viewer.min.js"></script>
    <script nomodule src="https://unpkg.com/@google/model-viewer@latest/dist/model-viewer-legacy.min.js"></script>

    <style>
      *,
      *::before,
      *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body,
      html {
        width: 100%;
        height: 100%;
        margin: 0;
        font-family: Arial, sans-serif;
        color: #ffffff;
        background-color: #000000;
      }

      body {
        display: flex;
        flex-direction: column;
      }

      #loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #000000;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition: transform 1s ease, opacity 1s ease;
        transform: translateY(0);
        opacity: 1;
      }

      #loading-screen.slide-up {
        transform: translateY(-100%);
        opacity: 0;
      }

      #loading-screen img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .split-view {
        flex: 1;
        display: flex;
        width: 100%;
        height: 100%;
      }

      .pane {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        overflow: hidden;
      }

      .pane-left {
        background-color: #000000;
      }

      .pane-right {
        background-color: #ffffff;
      }

      model-viewer {
        width: 100%;
        height: 100%;
        background: transparent;
        --poster-color: transparent;
      }

      .fallback-message {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 1.2rem;
        pointer-events: none;
      }

      .pane-right .fallback-message {
        color: #000000;
      }

      .attribution {
        padding: 16px 24px;
        font-size: 0.85rem;
        line-height: 1.4;
        color: #cccccc;
        background-color: #000000;
      }

      .attribution a {
        color: #ffffff;
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div id="loading-screen" aria-hidden="true">
      <img src="Z2.png" alt="Loading screen with logo" />
    </div>

    <div class="split-view">
      <section class="pane pane-left" aria-label="H2 Acty model">
        <model-viewer
          id="model-acty"
          src="h2acty.glb"
          alt="3D model of the H2 Acty"
          auto-rotate
          camera-controls
          disable-pan
          interaction-prompt="none"
          shadow-intensity="0"
          background-color="#000000">
          <p class="fallback-message">Loading...</p>
        </model-viewer>
      </section>
      <section class="pane pane-right" aria-label="H2 Mac Plus model">
        <model-viewer
          id="model-macplus"
          src="h2macplus.glb"
          alt="3D model of the H2 Mac Plus"
          auto-rotate
          camera-controls
          disable-pan
          camera-orbit="0deg 75deg 105%"
          interaction-prompt="none"
          shadow-intensity="0"
          background-color="#ffffff">
          <p class="fallback-message">Loading...</p>
        </model-viewer>
      </section>
    </div>

    <footer class="attribution">
      "Honda Acty" (
      <a href="https://skfb.ly/oPw7U" target="_blank" rel="noopener noreferrer">https://skfb.ly/oPw7U</a>
      ) by Mona x Supercars is licensed under
      <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer">
        Creative Commons Attribution
      </a>

      <br />
      "Personal Computer &quot;Macintosh Plus&quot;, 3-teilig" (
      <a href="https://skfb.ly/oLNAK" target="_blank" rel="noopener noreferrer">https://skfb.ly/oLNAK</a>
      ) by Deutsches Museum | Digital is licensed under
      <a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">
        Creative Commons Attribution-ShareAlike
      </a>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const modelViewers = Array.from(document.querySelectorAll("model-viewer"));
        const loadingScreen = document.getElementById("loading-screen");

        const modelLoaded = modelViewers.map(
          (viewer) =>
            new Promise((resolve) => {
              viewer.addEventListener("load", resolve, { once: true });
            })
        );

        const timeout = new Promise((resolve) => {
          setTimeout(resolve, 2750);
        });

        Promise.all([...modelLoaded, timeout]).then(() => {
          document.querySelectorAll(".fallback-message").forEach((fallback) => {
            fallback.style.display = "none";
          });
          loadingScreen.classList.add("slide-up");
          setTimeout(() => {
            loadingScreen.style.display = "none";
          }, 1000);
        });

        modelViewers.forEach((viewer) => {
          viewer.addEventListener("error", (event) => {
            console.error(`Error loading 3D model (${viewer.getAttribute("src")}):`, event);
            const fallback = viewer.querySelector(".fallback-message");
            fallback.textContent = "Failed to load the 3D model.";
          });
        });
      });
    </script>
  </body>
</html>
